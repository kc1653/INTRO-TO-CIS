D2L.LE.Web={};D2L.LE.Web.UI={};
D2L.LE.Web.UI.Desktop={Controls:{}};
D2L.LP.Web.UI.Html.Dom.AddClassInitializer("d2l-le-TreeAccordionItem",function(node){var hasDragDrop=D2L.LP.Web.UI.ObjectRepository.HasKeys(node.id,"DragDropSettings");if(hasDragDrop){var dragDropSettings=D2L.LP.Web.UI.ObjectRepository.Get(node.id,"DragDropSettings");var dragHandleId=D2L.LP.Web.UI.ObjectRepository.Get(node.id,"DragHandleId");var dragHandle=D2L.LP.Web.UI.Html.Dom.GetElementById(dragHandleId.GetValue());D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.InstallDragDropOnItem(node,dragDropSettings,
dragHandle)}});
D2L.LP.Web.UI.Html.Dom.AddClassInitializer("d2l-le-TreeAccordionItem-anchor",function(node){var addClassName=function(node,className){if(className.length>0)node.className+=" "+className};var removeClassName=function(node,className){if(className.length>0)node.className=node.className.replace(" "+className,"")};D2L.LP.Web.UI.Html.Dom.AddEventListener("click",node,function(){var treeRootClassName="d2l-le-TreeAccordionItem-Root";var isRoot=D2L.LP.Web.UI.Html.Dom.HasClassName(treeRootClassName,node);var treeRoot;
if(isRoot===true)treeRoot=node;else treeRoot=D2L.LP.Web.UI.Html.Dom.GetParentElementByClassName(treeRootClassName,node);var selectedRootClassName="d2l-le-TreeAccordionItem-SelectedRoot";var currentSelectedRoot=D2L.LP.Web.UI.Html.Dom.GetFirstElementByClassName(selectedRootClassName);if(currentSelectedRoot!=null)removeClassName(currentSelectedRoot,selectedRootClassName);addClassName(treeRoot,selectedRootClassName);var className="d2l-le-TreeAccordionItem-Selected";var selectedObject=D2L.LP.Web.UI.Html.Dom.GetFirstElementByClassName(className);
if(selectedObject!=null)removeClassName(selectedObject,className);addClassName(node.parentNode,className)});D2L.LP.Web.UI.Html.Dom.AddEventListener("focus",node,function(){addClassName(node.parentNode,"d2l-le-TreeAccordionItem-Active")});D2L.LP.Web.UI.Html.Dom.AddEventListener("blur",node,function(){removeClassName(node.parentNode,"d2l-le-TreeAccordionItem-Active")});D2L.LP.Web.UI.Html.Dom.AddEventListener("mouseover",node,function(){addClassName(node.parentNode,"d2l-le-TreeAccordionItem-Active")});
D2L.LP.Web.UI.Html.Dom.AddEventListener("mouseout",node,function(){removeClassName(node.parentNode,"d2l-le-TreeAccordionItem-Active")})});
D2L.LE.Web.UI.Desktop.Controls.AccordionTree={SelectTreeNodeFunction:function(treeId,nodeKey){var addClassName=function(n,className){if(className.length>0)n.className+=" "+className};var removeClassName=function(n,className){if(className.length>0)n.className=n.className.replace(" "+className,"")};var nodeId=treeId.GetValue()+"_"+nodeKey;var node=D2L.LP.Web.UI.Html.Dom.GetElementById(nodeId);var expandnode=node;while(expandnode!=null){var parent=D2L.LP.Web.UI.Html.Dom.GetParentElementByClassName("d2l-le-TreeAccordionGroup",
expandnode);if(parent!=null)D2L.LP.Web.UI.Html.Dom.SetIsDisplayedNode(parent,true);expandnode=parent}D2L.LE.Web.UI.Desktop.Controls.AccordionTree.ExpandNodeFunction(treeId,nodeKey);if(node!=null){var treeRootClassName="d2l-le-TreeAccordionItem-Root";var isRoot=D2L.LP.Web.UI.Html.Dom.HasClassName(treeRootClassName,node);var treeRoot;if(isRoot===true)treeRoot=node;else treeRoot=D2L.LP.Web.UI.Html.Dom.GetParentElementByClassName(treeRootClassName,node);var selectedRootClassName="d2l-le-TreeAccordionItem-SelectedRoot";
var currentSelectedRoot=D2L.LP.Web.UI.Html.Dom.GetFirstElementByClassName(selectedRootClassName);if(currentSelectedRoot!=null)removeClassName(currentSelectedRoot,selectedRootClassName);addClassName(treeRoot,selectedRootClassName);var className="d2l-le-TreeAccordionItem-Selected";var selectedObject=D2L.LP.Web.UI.Html.Dom.GetFirstElementByClassName(className);if(selectedObject!=null)removeClassName(selectedObject,className);addClassName(node,className)}},CollapseNodesFunction:function(treeId,nodeKeys){for(var i=
0;i<nodeKeys.length;i++){var nodeId=treeId.GetValue()+"_"+nodeKeys[i];var node=D2L.LP.Web.UI.Html.Dom.GetElementById(nodeId);D2L.LE.Web.UI.Desktop.Controls.AccordionTree.CollapseNodeChildrenFunction(node)}},CollapseNodeChildrenFunction:function(node){var childElements=D2L.LP.Web.UI.Html.Dom.GetElementsByClassName("d2l-le-TreeAccordionGroup",node);for(var i=childElements.length-1;i>=0;i--){var child=childElements[i];D2L.LP.Web.UI.Html.Dom.SetIsDisplayedNode(child,false)}},CollapseChildrenFunction:function(treeId,
nodeKey){var nodeId=treeId.GetValue()+"_"+nodeKey;var node=D2L.LP.Web.UI.Html.Dom.GetElementById(nodeId);D2L.LE.Web.UI.Desktop.Controls.AccordionTree.CollapseNodeChildrenFunction(node)},ExpandNodeFunction:function(treeId,nodeKey){var nodeId=new D2L.LP.Web.UI.Html.AbsoluteHtmlId(treeId.GetValue()+"_"+nodeKey+"_children");var node=D2L.LP.Web.UI.Html.Dom.GetElementById(nodeId.GetValue());if(node!=null)D2L.LP.Web.UI.Html.Dom.SetIsDisplayedNode(node,true)},ExpandCollapseNodeFunction:function(treeId,nodeKey){var nodeId=
new D2L.LP.Web.UI.Html.AbsoluteHtmlId(treeId.GetValue()+"_"+nodeKey+"_children");var node=D2L.LP.Web.UI.Html.Dom.GetElementById(nodeId.GetValue());var isVisible=D2L.LP.Web.UI.Html.Dom.IsVisible(node);if(isVisible)D2L.LP.Web.UI.Html.Dom.SetIsDisplayedNode(node,false);else D2L.LP.Web.UI.Html.Dom.SetIsDisplayedNode(node,true)}};
D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop={m_dropKey:null,m_dropPosition:null,m_dragPosition:null,m_dropTargetIndicatorNode:null,GetDropKey:function(){return D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.m_dropKey},GetDropPosition:function(){return D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.m_dropPosition},GetDragParam:function(){return D2L.LP.Web.UI.Html.DragDrop.DragDropManager.GetDragParam()},GetDragKey:function(){return D2L.LP.Web.UI.Html.DragDrop.DragDropManager.GetDragKey()},
GetOnDropHandlerFunction:function(treeAccordionId){return D2L.LP.Web.UI.ObjectRepository.Get(treeAccordionId.GetValue(),"OnDropHandlerFunction")},SetDropKey:function(dropKey){D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.m_dropKey=dropKey},SetDropPosition:function(dropPosition){D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.m_dropPosition=dropPosition},SetDragPosition:function(dragPosition){D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.m_dragPosition=dragPosition},GetDragPosition:function(){return D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.m_dragPosition},
InstallDragDropOnItem:function(node,dragDropSettings,dragHandle){var me=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop;node.d2l_dragDropSettings=dragDropSettings;if(dragDropSettings.IsDraggable){var dragSettings=new D2L.LP.Web.UI.Html.DragDrop.DraggableSettings;dragSettings.SetIsAutoScroll(true);dragSettings.SetHandle(dragHandle);dragSettings.SetKey(D2L.LP.Web.UI.Html.Dom.GetAttribute(node,"data-key"));D2L.LP.Web.UI.Html.DragDrop.MakeDraggableNode(node,dragSettings)}if(dragDropSettings.DropSupport!==
D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DropSupportTypes.None){var dropHandle=D2L.LP.Web.UI.Html.Dom.GetFirstElementByClassName("d2l-le-TreeAccordionItem-wrapper",node);var dropSettings=new D2L.LP.Web.UI.Html.DragDrop.DroppableSettings;dropSettings.SetEventPropagation(false);dropSettings.GetDragOverEvent().AddListener(function(dragObject,mouseDelta){me.DragOverEventHandler(node,dragObject,mouseDelta)});dropSettings.GetDragOutEvent().AddListener(function(dragObject){me.DragOutEventHandler(node,
dragObject)});dropSettings.GetDropEvent().AddListener(function(){me.DropEventHandler(node)});D2L.LP.Web.UI.Html.DragDrop.MakeDroppableNode(dropHandle,dropSettings)}},DropEventHandler:function(node){var me=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop;var dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.GetDragPosition();if(dragPosition!=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Invalid){if(dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Top)me.SetDropPosition(D2L.LP.Web.UI.Html.DragDrop.DropPosition.Before);
else if(dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Bottom)me.SetDropPosition(D2L.LP.Web.UI.Html.DragDrop.DropPosition.After);else if(dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Middle)me.SetDropPosition(D2L.LP.Web.UI.Html.DragDrop.DropPosition.On);var nodeKey=D2L.LP.Web.UI.Html.Dom.GetAttribute(node,"data-key");me.SetDropKey(nodeKey);var treeNode=D2L.LP.Web.UI.Html.Dom.GetParentElementByClassName("d2l-le-TreeAccordion",node);
if(D2L.LP.Web.UI.ObjectRepository.HasKeys(treeNode.id,"OnDropHandlerFunction")){var onDropHandler=D2L.LP.Web.UI.ObjectRepository.Get(treeNode.id,"OnDropHandlerFunction");onDropHandler.call(onDropHandler)}}D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.SetDragPosition(D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Invalid);D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.UpdateDropTargetStyle(node)},DragOverEventHandler:function(node,dragObject,mouseDelta){var isInvalidTarget=
node===dragObject.GetDragNode()||dragObject.GetDraggableSettings().GetKey()==D2L.LP.Web.UI.Html.Dom.GetAttribute(node,"data-key")||D2L.LP.Web.UI.Html.Dom.IsAncestor(dragObject.GetDragNode(),node);if(isInvalidTarget){D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.SetDragPosition(D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Invalid);return}var dragDropSettings=node.d2l_dragDropSettings;var dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Invalid;
if(dragDropSettings.DropSupport==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DropSupportTypes.All)if(mouseDelta.topDelta/mouseDelta.nodeHeight<0.25)dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Top;else if(mouseDelta.bottomDelta/mouseDelta.nodeHeight<0.25)dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Bottom;else dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Middle;if(dragDropSettings.DropSupport==
D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DropSupportTypes.OnlyDropBeforeAfter)if(mouseDelta.topDelta<mouseDelta.bottomDelta)dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Top;else dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Bottom;if(dragDropSettings.DropSupport==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DropSupportTypes.OnlyDropOn)dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Middle;
var invalidDragGroup=dragDropSettings.InvalidDragGroup;var dragGroup=dragObject.GetDraggableSettings().GetDragGroup();if(invalidDragGroup&&dragGroup){if(dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Top||dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Bottom)if(invalidDragGroup[D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DropSupportTypes.OnlyDropBeforeAfter]==dragGroup||invalidDragGroup[D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DropSupportTypes.All]==
dragGroup)dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Invalid;if(dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Middle)if(invalidDragGroup[D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DropSupportTypes.OnlyDropOn]==dragGroup||invalidDragGroup[D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DropSupportTypes.All]==dragGroup)dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Invalid}D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.SetDragPosition(dragPosition);
D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.UpdateDropTargetStyle(node)},DragOutEventHandler:function(node,dragObject){D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.SetDragPosition(D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Invalid);if(node===dragObject.GetDragNode())return;D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.UpdateDropTargetStyle(node)},UpdateDropTargetStyle:function(node){var me=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop;var removeAllDragDropStyles=
function(){removeClassName("d2l-le-TreeAccordionItem-drag-on");removeClassName("d2l-le-TreeAccordionItem-drag-before");removeClassName("d2l-le-TreeAccordionItem-drag-after");if(me.m_dropTargetIndicatorNode!==null&&me.m_dropTargetIndicatorNode.parentNode!=null)me.m_dropTargetIndicatorNode.parentNode.removeChild(me.m_dropTargetIndicatorNode)};var addClassName=function(className){D2L.LP.Web.UI.Html.Dom.AddClassName(className,node)};var removeClassName=function(className){D2L.LP.Web.UI.Html.Dom.RemoveClassName(className,
node)};if(me.m_dropTargetIndicatorNode==null){me.m_dropTargetIndicatorNode=document.createElement("div");me.m_dropTargetIndicatorNode.className="d2l-le-TreeAccordionItem-drop-target";var wrapper=document.createElement("div");wrapper.className="d2l-datalist-item-drop-target-line";var circle1=document.createElement("div");circle1.className="d2l-datalist-item-drop-target-circle1";var circle2=document.createElement("div");circle2.className="d2l-datalist-item-drop-target-circle2";wrapper.appendChild(circle1);
wrapper.appendChild(circle2);me.m_dropTargetIndicatorNode.appendChild(wrapper)}var dragPosition=D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.GetDragPosition();if(dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Middle){removeAllDragDropStyles();addClassName("d2l-le-TreeAccordionItem-drag-on")}if(dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Top)if(me.m_dropTargetIndicatorNode!=null||me.m_dropTargetIndicatorNode.parentNode!=
null||D2L.LP.Web.UI.Html.Dom.GetFirstElementChild(me.m_dropTargetIndicatorNode.parentNode)!=node){removeAllDragDropStyles();addClassName("d2l-le-TreeAccordionItem-drag-before");node.insertBefore(me.m_dropTargetIndicatorNode,D2L.LP.Web.UI.Html.Dom.GetFirstElementChild(node))}if(dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Bottom)if(me.m_dropTargetIndicatorNode==null||me.m_dropTargetIndicatorNode.parentNode==null||D2L.LP.Web.UI.Html.Dom.GetLastElementChild(me.m_dropTargetIndicatorNode.parentNode)!=
node){removeAllDragDropStyles();addClassName("d2l-le-TreeAccordionItem-drag-after");var childNode=D2L.LP.Web.UI.Html.Dom.GetFirstElementByClassName("d2l-le-TreeAccordionGroup",node);if(childNode!=null)node.insertBefore(me.m_dropTargetIndicatorNode,childNode);else node.appendChild(me.m_dropTargetIndicatorNode)}if(dragPosition==D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition.Invalid)removeAllDragDropStyles()}};
D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DragPosition={Invalid:0,Top:1,Middle:2,Bottom:3};D2L.LE.Web.UI.Desktop.Controls.AccordionTree.DragDrop.DropSupportTypes={None:0,OnlyDropOn:1,OnlyDropBeforeAfter:2,All:3};
D2L.LE.Web.UI.Desktop.Controls.NestedDataListItem=function(listItem){this.m_parentList=null;this.m_firstContent=null;this.m_secondContent=null;this.m_nestedContainer=null;this.m_altText=null;this.m_anchor=null,this.m_dataListItem=listItem;this.m_showing=false;this.m_nestedContainerId=null;this.m_showInitially=null;this.m_isInitialized=false;this.Initialize=function(){this.m_parentList=D2L.LP.Web.UI.Html.Dom.GetParentElementByClassName("d2l-datalist",this.m_dataListItem);var contentDivs=D2L.LP.Web.UI.Html.Dom.GetImmediateChildElementsByClassName("d2l-datalist-item-content",
this.m_dataListItem);this.m_firstContent=contentDivs[0];if(contentDivs.length>1){this.m_secondContent=contentDivs[1];this.m_nestedContainer=D2L.LP.Web.UI.Html.Dom.GetFirstImmediateChildElementByClassName("d2l-datalist-nesteditem-nestedcontainer",this.m_secondContent);this.m_nestedContainerId=this.m_nestedContainer.id}this.m_altText=this.m_firstContent.title;var children=this.m_dataListItem.children;for(var i=0;i<children.length;i++)if(children[i]!=null&&children[i].localName!=null&&children[i].localName==
"a"){this.m_anchor=children[i];break}this.m_isInitialized=true;if(this.m_showInitially){this.HideContents();this.ShowContents()}};this.DelayedInitialize=function(show){this.m_showInitially=show};this.CheckInitializeAndDo=function(){if(!this.m_isInitialized)this.Initialize()};this.GetListItem=function(){this.CheckInitializeAndDo();return this.m_dataListItem};this.GetContainerId=function(){this.CheckInitializeAndDo();return this.m_nestedContainerId};this.HideContents=function(){this.CheckInitializeAndDo();
if(this.m_dataListItem!=null&&this.m_showing){this.SetClosedAttributes();var childContainers=D2L.LP.Web.UI.Html.Dom.GetElementsByClassName("d2l-datalist-nesteditem-nestedcontainer",this.m_dataListItem);for(var i=0;i<childContainers.length;i++){var child=childContainers[i];D2L.LP.Web.UI.Html.Dom.SetIsDisplayedNode(child,false)}this.m_showing=false}};this.SetClosedAttributes=function(){this.m_dataListItem.insertBefore(this.m_anchor,this.m_firstContent);this.m_firstContent.title=this.m_altText;D2L.LP.Web.UI.Html.Dom.RemoveClassName("d2l-datalist-nesteditem-accordion-open",
this.m_dataListItem);D2L.LP.Web.UI.Html.Dom.RemoveClassName("d2l-datalist-item-actionable",this.m_dataListItem);D2L.LP.Web.UI.Html.Dom.AddClassName("d2l-datalist-item-actionable",this.m_dataListItem)};this.ShowContents=function(){this.CheckInitializeAndDo();if(this.m_dataListItem!=null&&this.m_nestedContainer!=null&&!this.m_showing){this.SetOpenAttributes();var current=D2L.LP.Web.UI.Html.Dom.GetFirstElementByClassName("d2l-datalist-nesteditem-nestedcontainer",this.m_dataListItem);while(current!=null){D2L.LP.Web.UI.Html.Dom.SetIsDisplayedNode(current,
true);current=D2L.LP.Web.UI.Html.Dom.GetParentElementByClassName("d2l-datalist-nesteditem-nestedcontainer",current)}scroll(0,0);this.m_showing=true}};this.SetOpenAttributes=function(){this.m_dataListItem.removeChild(this.m_anchor);this.m_firstContent.title="";D2L.LP.Web.UI.Html.Dom.RemoveClassName("d2l-datalist-item-actionable",this.m_dataListItem);D2L.LP.Web.UI.Html.Dom.RemoveClassName("d2l-datalist-nesteditem-accordion-open",this.m_dataListItem);D2L.LP.Web.UI.Html.Dom.AddClassName("d2l-datalist-nesteditem-accordion-open",
this.m_dataListItem)}};var DataListNestedItems=new Array;
D2L.LE.Web.UI.Desktop.Controls.NestedDataList={DoAccordion:function(nestedContainerId){var addClassName=D2L.LP.Web.UI.Html.Dom.AddClassName;var removeClassName=D2L.LP.Web.UI.Html.Dom.RemoveClassName;var nestedContainer=D2L.LP.Web.UI.Html.Dom.GetElementById(nestedContainerId.GetValue());var dataList=D2L.LP.Web.UI.Html.Dom.GetParentElementByClassName("d2l-datalist",nestedContainer);var newTopListItem=D2L.LP.Web.UI.Html.Dom.GetParentElementByClassName("d2l-datalist-nesteditem",nestedContainer);var oldTopListItem=
D2L.LP.Web.UI.Html.Dom.GetElementsByClassName("d2l-datalist-nesteditem",dataList)[0];if(oldTopListItem==newTopListItem)return;dataList.removeChild(newTopListItem);dataList.insertBefore(newTopListItem,oldTopListItem);var oldId=D2L.LP.Web.UI.Html.Dom.GetFirstElementByClassName("d2l-datalist-nesteditem-nestedcontainer",oldTopListItem).id;var newId=D2L.LP.Web.UI.Html.Dom.GetFirstElementByClassName("d2l-datalist-nesteditem-nestedcontainer",newTopListItem).id;for(var i=0;i<DataListNestedItems.length;i++){var id=
DataListNestedItems[i].GetContainerId();if(id!=null)if(id==newId)DataListNestedItems[i].ShowContents();else if(id==oldId)DataListNestedItems[i].HideContents()}var dataListItems=D2L.LP.Web.UI.Html.Dom.GetImmediateChildElementsByClassName("d2l-datalist-nesteditem-accordion",dataList);for(var i=0;i<dataListItems.length;i++){removeClassName("d2l-datalist-item-active",dataListItems[i]);removeClassName("d2l-datalist-lastchild",dataListItems[i])}addClassName("d2l-datalist-lastchild",dataListItems[dataListItems.length-
1])}};D2L.LP.Web.UI.Html.Dom.AddClassInitializer("d2l-datalist",function(dataList){var firstChild=D2L.LP.Web.UI.Html.Dom.GetFirstImmediateChildElementByClassName("d2l-datalist-nesteditem-accordion",dataList);D2L.LP.Web.UI.Html.Dom.AddClassName("d2l-datalist-nesteditem-accordion-firstchild",firstChild)});
D2L.LP.Web.UI.Html.Dom.AddClassInitializer("d2l-datalist-nesteditem-accordion",function(dataListItem){var content=D2L.LP.Web.UI.Html.Dom.GetImmediateChildElementsByClassName("d2l-datalist-item-content",dataListItem);if(content[0]!=null)D2L.LP.Web.UI.Html.Dom.AddClassName("d2l-datalist-item-content-first",content[0]);if(content[1]!=null)D2L.LP.Web.UI.Html.Dom.AddClassName("d2l-datalist-item-content-second",content[1]);var listItem=new D2L.LE.Web.UI.Desktop.Controls.NestedDataListItem(dataListItem);
if(dataListItem.className.indexOf("d2l-datalist-nesteditem-accordion-firstchild")>=0){listItem.DelayedInitialize(true);D2L.LP.Web.UI.Events.OnLoad.AddListener(listItem.Initialize.bind(listItem))}else listItem.DelayedInitialize(false);DataListNestedItems.push(listItem)});
D2L.LE.Web.UI.Desktop.Controls.PathSelector={GetValue:function(id){var input=D2L.LP.Web.UI.Html.Dom.GetElementById(id.GetValue());return D2L.LE.Web.UI.Desktop.Controls.PathSelector.GetValueNode(input)},GetValueNode:function(node){if(node!==null)return node.value;return""},JsFunctions:{},RegisterHandler:function(id,jsFunction){var input=D2L.LP.Web.UI.Html.Dom.GetElementById(id.GetValue());if(input!==null){var index=id.GetValue();this.JsFunctions[index]=jsFunction}},PathChanged:function(id){var index=
id.GetValue();if(this.JsFunctions[index]!==undefined)this.JsFunctions[index].call()},FormatPathString:function(id){var textBlock=D2L.LP.Web.UI.Html.Dom.GetElementById(id.GetValue());if(textBlock==null)return;var splitPath=textBlock.textContent.split("/");splitPath[splitPath.length-2]="<strong>"+splitPath[splitPath.length-2]+"</strong>";var formattedPath=splitPath.join("/");textBlock.innerHTML=formattedPath}};
D2L.LE.Web.UI.Desktop.Controls.ExemptionsCount=function(){function createUpdateFunction(placeholderId,orgId,orgUnitId,activityId,userId){return function(){var placeholder=new D2L.LP.Web.UI.Html.AbsoluteHtmlId(placeholderId);var location=new D2L.LP.Web.Http.UrlLocation.Create("/d2l/le/manageexemptions/"+orgUnitId+"/RefreshExemptionCount",{activityId:activityId,orgId:orgId,placeholderId:placeholderId,userId:userId});D2L.LP.Web.UI.Html.PartialRendering.PartialRender(placeholder,function(){return D2L.LP.Web.UI.Rpc.ConnectPartial(placeholder,
D2L.LP.Web.UI.Rpc.Verbs.GET,location)})}}return{createUpdateFunction:createUpdateFunction}}();
D2L.LE.Web.UI.Desktop.Controls.ManageExemptions=function(){function open(appId,exemptionCountId,orgId,orgUnitId,activityId,userId,classlistURL,exemptionsURL,exemptionUpdateURL){var token=D2L.LP.Web.Authentication.Xsrf.GetXsrfToken();var updateExemptionsCountFunction=D2L.LE.Web.UI.Desktop.Controls.ExemptionsCount.createUpdateFunction(exemptionCountId,orgId,orgUnitId,activityId,userId);D2LManageExemptions.loadVue(appId,classlistURL,exemptionsURL,exemptionUpdateURL,token,updateToastFunction,updateExemptionsCountFunction)}
function updateToastFunction(context,message){D2L.LP.Web.UI.Rpc.Connect("GET",new D2L.LP.Web.Http.UrlLocation.Create("/d2l/le/manageexemptions/UserExempted",{message:message}))}return{open:open}}();D2L.LE.Web.UI.Desktop.Controls.Restrictions=D2L.LE.Web.UI.Desktop.Controls.Restrictions||{};
D2L.LE.Web.UI.Desktop.Controls.Restrictions.EditRestrictionsTarget=function(){function onUpdateExemptionStatus(overlayId,exemptionsCountId,orgId,orgUnitId,activityId,userId){var el=document.getElementById(overlayId);if(!el){console.log("No overlay found");return}el.addEventListener("d2l-simple-overlay-close-button-clicked",function(){D2L.LE.Web.UI.Desktop.Controls.ExemptionsCount.createUpdateFunction(exemptionsCountId,orgId,orgUnitId,activityId,userId)()})}return{onUpdateExemptionStatus:onUpdateExemptionStatus}}();
if(window["D2L"]!==undefined&&D2L.LP.Web.Packaging!==undefined)D2L.LP.Web.Packaging.Register("D2L.LE.Web.UI.Desktop.default");